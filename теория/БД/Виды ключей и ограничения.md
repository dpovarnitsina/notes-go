# Виды ключей
- `PRIMARY KEY` - первичный ключ
- `UNIQUE KEY` - уникальный ключ
- `FOREIGN KEY` - внешний ключ


Сравнение PRIMARY KEY, UNIQUE KEY и FOREIGN KEY:

| **Критерий**               | **Первичный ключ (PRIMARY KEY)**                                  | **Уникальный ключ (UNIQUE KEY)**                       | **Внешний ключ (FOREIGN KEY)**                         |
|----------------------------|-------------------------------------------------------------------|--------------------------------------------------------|--------------------------------------------------------|
| **Уникальность**           | Да                                                                | Да                                                     | Нет                                                    |
| **Количество в таблице**   | Только один                                                       | Может быть несколько                                   | Может быть несколько                                   |
| **NULL-значения**          | Не допускаются                                                    | Допускаются (каждое NULL значение считается уникальным) | Допускаются (но могут быть ограничения)                |
| **Индексация**             | Автоматически индексируется                                       | Автоматически индексируется                            | Не индексируется автоматически (нужна явная индексация)| 
| **Цель**                   | Уникально идентифицировать каждую запись в таблице                | Обеспечить уникальность значений в одном или нескольких столбцах | Обеспечить ссылочную целостность между таблицами       |
| **Использование в связях** | Обычно используется как ссылка на внешние ключи в других таблицах | Может использоваться как ссылка на внешние ключи в других таблицах | Ссылается на первичный или уникальный ключ другой таблицы |
| **Изменяемость**           | Неизменяем                                                        | Могут быть изменяемы                                    | Может быть изменяем, но изменения должны соблюдать ограничения ссылочной целостности |
| **Поддержка целостности данных** | Да                                                                | Да                                                     | Да (ссылочная целостность)                             |
| **Часть составного ключа** | Может быть составным (состоящим из нескольких столбцов)           | Может быть составным (состоящим из нескольких столбцов) | Может быть составным (состоящим из нескольких столбцов)|

--------------------------------    

## UNIQUE KEY
UNIQUE KEY — это ограничение, применяемое к одному или нескольким столбцам таблицы, чтобы обеспечить уникальность значений в этих столбцах. 


```sql
CREATE TABLE universities (
    id BIGSERIAL UNIQUE,  
    full_name VARCHAR(200) UNIQUE,  
    acronym VARCHAR(30),  
    country VARCHAR(30),  
    city VARCHAR(30),  
    address VARCHAR(200), 
    UNIQUE(country, city, address)
);
```

--------------------------------    

## PRIMARY KEY

PRIMARY KEY реализует UNIQUE KEY и NOT NULL CONSTRAINT одновременно, но PRIMARY KEY != UNIQUE NOT NULL.

PRIMARY KEY это набор одного или нескольких полей/столбцов, которые уникально идентифицируют каждую запись в таблице.

```sql
CREATE TABLE students( 
    id BIGSERIAL PRIMARY KEY,  
    first_name VARCHAR(20),  
    last_name VARCHAR(30),  
    patronymic VARCHAR(30),  
    date_of_birth DATE,  
    course SMALLINT CHECK (course > 0 AND course < 10),  
    university VARCHAR(10)
);
```

```sql
CREATE TABLE Заказы (
    НомерЗаказа INT,
    ДатаЗаказа DATE,
    КлиентID INT,
    PRIMARY KEY (НомерЗаказа, ДатаЗаказа)
);
```
--------------------------------    

## FOREIGN KEY

FOREIGN KEY — это набор одного или нескольких столбцов в таблице базы данных, который создаёт ссылку на первичный ключ или уникальный ключ другой таблицы. 

```sql
CREATE TABLE Customers (
    ID INT PRIMARY KEY,
    Name VARCHAR(100)
);

CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    OrderDate DATE,
    CustomerID INT,
    FOREIGN KEY (CustomerID) REFERENCES Customers(ID)
);
```


### Виды ограничений
- NOT NULL CONSTRAINT - ограничение на ненулевое значение
- CHECK CONSTRAINT - ограничение на диапазон значений

**NOT NULL CONSTRAINT:**
```sql
CREATE TABLEuniversities( 
       id BIGSERIAL UNIQUE NOT NULL,  
       full_name VARCHAR(200) UNIQUE NOT NULL,  
       acronym VARCHAR(30),  country VARCHAR(30),  
       city VARCHAR(30),  
       address VARCHAR(200), 
       UNIQUE(country, city, address)
);
```

**CHECK CONSTRAINT:**
```sql  
CREATE TABLEstudents( 
       id BIGSERIAL UNIQUE NOT NULL,  
       first_name VARCHAR(20),  
       last_name VARCHAR(30),  
       patronymic VARCHAR(30), 
       date_of_birth DATE,  
       course SMALLINT CHECK (course > 0 AND course < 10),  
       university VARCHAR(10)
);
```

Вот какие ограничения могут быть установлены для каждого типа ключа:

	1.	PRIMARY KEY
        •	NOT NULL CONSTRAINT: Всегда присутствует, так как ключи PRIMARY KEY не могут содержать NULL значений.
        •	CHECK CONSTRAINT: Можно устанавливать, чтобы проверять дополнительные условия на значения ключа.
	2.	UNIQUE KEY
        •	NOT NULL CONSTRAINT: Можно устанавливать, если требуется, чтобы значения в уникальном ключе не были NULL.
        •	CHECK CONSTRAINT: Можно устанавливать, чтобы проверять дополнительные условия на значения ключа.
	3.	FOREIGN KEY
        •	NOT NULL CONSTRAINT: Можно устанавливать, чтобы требовать, чтобы значения внешнего ключа не были NULL.
        •	CHECK CONSTRAINT: Можно устанавливать, чтобы проверять дополнительные условия на значения внешнего ключа.


